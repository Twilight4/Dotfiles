# Footprinting
sudo nmap 10.129.14.128 -sV -sC -p3306 --script mysql*

# Some of the information might turn out to be a false-positive. 
# For example as we know for a fact that the target MySQL server 
# does not use an empty password for the user root, but a fixed password. 
# We can test this with the following command:
# Log in syntax: mysql -u <user> -p<password> -h <FQDN/IP> (with password there's really no space)
mysql -u root -h 10.129.14.132

# Interacting with the MySQL Server
show databases;     
select version();
use mysql;
show tables;

# The most important databases for the MySQL server are the system schema 
# (sys) and information schema (information_schema).
use sys;
show tables;  
select host, unique_users from host_summary;

#Commands:
mysql -u <user> -p<password> -h <IP address>        # Connect to the MySQL server. There should not be a space between the '-p' flag, and the password.
show databases;                                     # Show all databases.
use <database>;                                     # Select one of the existing databases.
show tables;                                        # Show all available tables in the selected database.
show columns from <table>;                          # Show all columns in the selected database.
select * from <table>;                              # Show everything in the desired table.
select * from <table> where <column> = "<string>"; 	# Search for needed string in the desired table.


## BASICS ##
mysqldump -h hostname -u username -p database_name -P port > file.sql # Export database
mysql -u username -p database_name < file.sql                         # Import database

SHOW PROCESSLIST; # Show you any queries that are currently running or in the queue to run

show status where `variable_name` = 'Threads_connected'; # Show all connected threads
show variables like 'max_connections'; # Show maximum number of allowed connections
SET GLOBAL max_connections = 150; ## Set new value for maximum connections (no restart needed but for permanent change update my.cnf)

GRANT ALL PRIVILEGES ON prospectwith.* TO 'power'@'localhost' WITH GRANT OPTION; # Grant all privileges on database

CREATE USER 'newuser'@'localhost' IDENTIFIED BY 'password'; # Create user

mysql -u root -pmypassword -e "MY SQL QUERY" &>> query.log & disown # Run SQL query in the background
