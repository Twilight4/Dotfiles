# By default, rsync uses port 873 and can be configured to use SSH for secure file transfers by piggybacking
# on top of an established SSH server connection.
# If you find credentials during a pentest and run into Rsync on an internal (or external) host, it is always 
# worth checking for password re-use as you may be able to pull down some sensitive files that could be used to gain remote access to the target.

# Scanning for Rsync - port 873 by default
sudo nmap -sV -p 873 127.0.0.1

# Probing for Accessible Shares (to see what we can gain access to)
nc -nv 127.0.0.1 873

# Enumerating an Open Sharea - if we see a share called dev, and we can enumerate it further
rsync -av --list-only rsync://127.0.0.1/dev
# If we see output of files that may be worth pulling down for investigation, (like ssh keys), we can sync all files
# to our attack host with the command:
rsync -av rsync://127.0.0.1/dev
# If Rsync is configured to use SSH to transfer files, we could modify our commands to include the -e ssh flag
# or -e "ssh -p2222" if a non-standard port is in use for SSH. Read guides: https://phoenixnap.com/kb/how-to-rsync-over-ssh
